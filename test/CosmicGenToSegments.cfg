process Prod1 = {

   service = Timing {}

   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 98123
      PSet moduleSeeds =
      {
         untracked uint32 g4SimHits = 1234567
      }
   }

   source = CosMuoGenSource {
     untracked int32  maxEvents = 2000
     untracked double MinEn =    7.
     untracked double MaxEn =   10000
     untracked double MinTheta =  0.
     untracked double MaxTheta = 88.
     untracked double MinPhi =    0.
     untracked double MaxPhi =  360.
     untracked double MinT0  =  -12.5
     untracked double MaxT0  =   12.5
     untracked double ElossScaleFactor = 0.0
     #WARNING: If "TrackerOnly=true" then tracker-only setup will be used. 
     #This means R=1100 and Z=1100, no material or B-field outside is considered
     untracked bool TrackerOnly = false
     untracked bool Verbosity = false
   }

   include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
   include "Geometry/CMSCommonData/data/cmsMTCCGeometryXML.cfi"

   #Magnetic Field
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # Detector Simulation
   include "SimG4Core/Application/data/SimG4Object.cfi"
   replace g4SimHits.Generator.HepMCProductLabel = "source"

   # Digitization of the simulated hits

   # CSC
   include "Geometry/CSCGeometry/data/cscGeometry.cfi"
   include "SimMuon/CSCDigitizer/data/muonCSCDigis.cfi"

   # DT
   include "Geometry/DTGeometry/data/dtGeometry.cfi"
   include "SimMuon/DTDigitizer/data/muonDTDigis.cfi"

   # RPC
   include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
   include "SimMuon/RPCDigitizer/data/muonRPCDigis.cfi"

   # Mixing Module is *required* to simulated Ecal/Hcal/Muon digitization !

   module mix = MixingModule
   {
      int32 bunchspace = 25
   }

#
# Muon Segments
#
   ## CSC
   include "RecoLocalMuon/CSCRecHit/data/csc2DRecHits.cfi"
   include "RecoLocalMuon/CSCSegment/data/cscSegments.cfi"

   ## DT
   include "RecoLocalMuon/DTRecHit/data/dt1DRecHits_ParamDrift.cfi"
   include "RecoLocalMuon/DTSegment/data/dt2DSegments_CombPatternReco2D_ParamDrift.cfi"
   include "RecoLocalMuon/DTSegment/data/dt4DSegments_CombPatternReco4D_ParamDrift.cfi"

   include "RecoLocalMuon/RPCRecHit/data/rpcRecHits.cfi"

   # Output module
   #
   module output = PoolOutputModule
   {
      untracked string fileName = "/tmp/cliu/cosSegs.root"
   }
   # Now order modules for execution
   #
   sequence muonDigi = { muonCSCDigis & muonDTDigis & muonRPCDigis }
   sequence dtReco = {dt1DRecHits, dt2DSegments, dt4DSegments }
   sequence cscReco = {csc2DRecHits, cscSegments }
   sequence rpcReco = {rpcRecHits}
   sequence muonReco = {cscReco & dtReco & rpcRecHits}

   path p1 = {g4SimHits, mix, muonDigi, muonReco}

   endpath outpath = { output }

}
